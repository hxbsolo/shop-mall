{"version":3,"sources":["index.cjs.js"],"names":[],"mappings":";;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.js","sourcesContent":["/*!\n* MpKit v1.1.1\n* (c) 2020-2021 imingyu<mingyuhisoft@163.com>\n* Released under the MIT License.\n* Github: https://github.com/imingyu/mpkit/tree/master/packages/util\n*/\n\n\nObject.defineProperty(exports, '__esModule', { value: true });\n\nfunction _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function (obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function (obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nvar uuid = function uuid() {\n  return \"xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx\".replace(/[xy]/g, function (c) {\n    // tslint:disable-next-line:no-bitwise\n    var r = Math.random() * 16 | 0; // tslint:disable-next-line:no-bitwise\n\n    var v = c === \"x\" ? r : r & 0x3 | 0x8;\n    return v.toString(16);\n  });\n};\nvar isNativeFunc = function isNativeFunc(func) {\n  return func === Function || typeof func === \"function\" && func.toString().indexOf(\"[native code]\") !== -1;\n};\nvar isFunc = function isFunc(obj) {\n  return typeof obj === \"function\";\n};\nvar isPromise = function isPromise(obj) {\n  return obj && obj.then;\n};\nvar getMpPlatform = function () {\n  var platform;\n  return function () {\n    if (platform) {\n      return platform;\n    }\n\n    if ((typeof wx === \"undefined\" ? \"undefined\" : _typeof(wx)) === \"object\") {\n      return platform = \"wechat\"\n      /* wechat */\n      ;\n    }\n\n    if ((typeof my === \"undefined\" ? \"undefined\" : _typeof(my)) === \"object\") {\n      return platform = \"alipay\"\n      /* alipay */\n      ;\n    }\n\n    if ((typeof swan === \"undefined\" ? \"undefined\" : _typeof(swan)) === \"object\") {\n      return platform = \"smart\"\n      /* smart */\n      ;\n    }\n\n    if ((typeof tt === \"undefined\" ? \"undefined\" : _typeof(tt)) === \"object\") {\n      return platform = \"tiktok\"\n      /* tiktok */\n      ;\n    }\n\n    return platform = \"unknown\"\n    /* unknown */\n    ;\n  };\n}();\nvar getApiVar = function getApiVar() {\n  var platform = getMpPlatform();\n\n  if (platform === \"wechat\"\n  /* wechat */\n  && (typeof wx === \"undefined\" ? \"undefined\" : _typeof(wx)) === \"object\") {\n    return wx;\n  } else if (platform === \"alipay\"\n  /* alipay */\n  && (typeof my === \"undefined\" ? \"undefined\" : _typeof(my)) === \"object\") {\n    return my;\n  } else if (platform === \"smart\"\n  /* smart */\n  && (typeof swan === \"undefined\" ? \"undefined\" : _typeof(swan)) === \"object\") {\n    return swan;\n  } else if (platform === \"tiktok\"\n  /* tiktok */\n  && (typeof tt === \"undefined\" ? \"undefined\" : _typeof(tt)) === \"object\") {\n    return tt;\n  }\n};\nvar getMpInitLifeName = function getMpInitLifeName(viewType) {\n  if (viewType === \"App\"\n  /* App */\n  ) {\n      return \"onLaunch\";\n    }\n\n  if (viewType === \"Page\"\n  /* Page */\n  ) {\n      return \"onLoad\";\n    }\n\n  if (viewType === \"Component\"\n  /* Component */\n  ) {\n      var mpPlatform = getMpPlatform();\n      return mpPlatform !== \"alipay\"\n      /* alipay */\n      ? \"created\" : \"onInit\";\n    }\n};\nvar getMpMountLifeName = function getMpMountLifeName(viewType) {\n  if (viewType === \"App\"\n  /* App */\n  ) {\n      return \"onShow\";\n    }\n\n  if (viewType === \"Page\"\n  /* Page */\n  ) {\n      return \"onShow\";\n    }\n\n  if (viewType === \"Component\"\n  /* Component */\n  ) {\n      var mpPlatform = getMpPlatform();\n      return mpPlatform !== \"alipay\"\n      /* alipay */\n      ? \"attached\" : \"didMount\";\n    }\n};\nvar initView = function initView(view, viewType) {\n  defineViewType(view, viewType);\n  defineViewKey(view);\n};\n\nvar defineViewKey = function defineViewKey(view) {\n  if (!view.$mkKeyIsDefine) {\n    view.$mkKeyIsDefine = uuid();\n    Object.defineProperty(view, \"$mkKey\", {\n      get: function get() {\n        return getMpNativeViewId(this, getMpViewType(this));\n      }\n    });\n  }\n};\n\nvar defineViewType = function defineViewType(view, value) {\n  if (!view.$mkType) {\n    Object.defineProperty(view, \"$mkType\", {\n      value: value\n    });\n  }\n\n  return value;\n};\n\nvar getMpViewType = function getMpViewType(view) {\n  if (getMpPlatform() === \"unknown\"\n  /* unknown */\n  ) {\n      return;\n    }\n\n  if (!view.$mkType) {\n    if (\"route\" in view || \"__route__\" in view) {\n      return defineViewType(view, \"Page\"\n      /* Page */\n      );\n    }\n\n    if (\"triggerEvent\" in view) {\n      return defineViewType(view, \"Component\"\n      /* Component */\n      );\n    }\n\n    if (\"props\" in view && getMpPlatform() === \"alipay\"\n    /* alipay */\n    ) {\n        return defineViewType(view, \"Component\"\n        /* Component */\n        );\n      }\n\n    if (typeof getApp === \"function\" && getApp() === view) {\n      return defineViewType(view, \"App\"\n      /* App */\n      );\n    }\n\n    return defineViewType(view, \"Page\"\n    /* Page */\n    );\n  }\n\n  return view.$mkType;\n};\nvar getMpNativeViewId = function getMpNativeViewId(vm, viewType) {\n  if (!viewType) {\n    var tsViewType = getMpViewType(vm);\n\n    if (tsViewType) {\n      viewType = tsViewType;\n    }\n  }\n\n  if (!viewType) {\n    return;\n  }\n\n  var MP_PLATFORM = getMpPlatform();\n\n  if (MP_PLATFORM === \"unknown\"\n  /* unknown */\n  ) {\n      return \"unknown\";\n    }\n\n  if (viewType === \"App\"\n  /* App */\n  ) {\n      return \"app\";\n    }\n\n  if (viewType === \"Page\"\n  /* Page */\n  ) {\n      if (MP_PLATFORM === \"wechat\"\n      /* wechat */\n      ) {\n          return vm.__wxWebviewId__ + \"\";\n        }\n\n      if (MP_PLATFORM === \"alipay\"\n      /* alipay */\n      ) {\n          return vm.$viewId;\n        }\n\n      if (MP_PLATFORM === \"tiktok\"\n      /* tiktok */\n      ) {\n          return vm.__webviewId__ + \"\";\n        }\n\n      if (MP_PLATFORM === \"smart\"\n      /* smart */\n      ) {\n          defineViewKey(vm);\n          return vm.$mkKey;\n        }\n    }\n\n  if (viewType === \"Component\"\n  /* Component */\n  ) {\n      if (MP_PLATFORM === \"wechat\"\n      /* wechat */\n      ) {\n          return vm.$mkKeyIsDefine;\n        }\n\n      if (MP_PLATFORM === \"alipay\"\n      /* alipay */\n      ) {\n          return vm.$id + \"\";\n        }\n\n      if (MP_PLATFORM === \"tiktok\"\n      /* tiktok */\n      ) {\n          return vm.__nodeId__ + \"\";\n        }\n\n      if (MP_PLATFORM === \"smart\"\n      /* smart */\n      ) {\n          return vm.nodeId;\n        }\n    }\n};\nvar getMpComponentPageNativeViewId = function getMpComponentPageNativeViewId(vm) {\n  var MP_PLATFORM = getMpPlatform();\n\n  if (MP_PLATFORM === \"wechat\"\n  /* wechat */\n  ) {\n      return vm.__wxWebviewId__ + \"\";\n    }\n\n  if (MP_PLATFORM === \"alipay\"\n  /* alipay */\n  ) {\n      return getMpNativeViewId(vm.$page);\n    }\n\n  if (MP_PLATFORM === \"tiktok\"\n  /* tiktok */\n  ) {\n      return vm.__webviewId__ + \"\";\n    }\n\n  if (MP_PLATFORM === \"smart\"\n  /* smart */\n  ) {\n      return getMpNativeViewId(vm.pageinstance);\n    }\n};\nvar getMpViewPathName = function getMpViewPathName(viewType, vm) {\n  if (viewType === \"App\"\n  /* App */\n  ) {\n      return \"app\";\n    }\n\n  if (!vm) {\n    return \"\";\n  }\n\n  var MP_PLATFORM = getMpPlatform();\n\n  if (MP_PLATFORM === \"wechat\"\n  /* wechat */\n  ) {\n      return vm.is;\n    }\n\n  if (MP_PLATFORM === \"alipay\"\n  /* alipay */\n  ) {\n      if (viewType === \"Page\"\n      /* Page */\n      ) {\n          return vm.route;\n        }\n\n      return vm.is;\n    }\n\n  if (MP_PLATFORM === \"tiktok\"\n  /* tiktok */\n  ) {\n      return vm.is;\n    }\n\n  if (MP_PLATFORM === \"smart\"\n  /* smart */\n  ) {\n      if (viewType === \"Page\"\n      /* Page */\n      ) {\n          return vm.route;\n        }\n\n      return vm.is;\n    }\n};\nvar isMpIvew = function isMpIvew(view) {\n  if (_typeof(view) === \"object\" && view && !isPlainObject(view)) {\n    if (view.$mkType) {\n      return true;\n    }\n\n    if (getMpViewType(view)) {\n      return true;\n    }\n  }\n\n  return false;\n};\nvar clone = function clone(obj) {\n  var type = _typeof(obj);\n\n  if (type !== \"object\") {\n    return obj;\n  } else if (Array.isArray(obj)) {\n    var res_1 = [];\n    obj.forEach(function (item, index) {\n      res_1[index] = clone(item);\n    });\n    return res_1;\n  } else if (obj && isPlainObject(obj)) {\n    return Object.keys(obj).reduce(function (sum, key) {\n      sum[key] = clone(obj[key]);\n      return sum;\n    }, {});\n  } else {\n    return obj;\n  }\n};\nfunction isPlainObject(value) {\n  if (_typeof(value) !== \"object\") {\n    return false;\n  }\n\n  if (value == null || Object.getPrototypeOf(value) === null) {\n    return true;\n  }\n\n  var proto = value;\n\n  while (Object.getPrototypeOf(proto) !== null) {\n    proto = Object.getPrototypeOf(proto);\n  }\n\n  return Object.getPrototypeOf(value) === proto;\n}\nvar isEmptyObject = function isEmptyObject(obj) {\n  if (Array.isArray(obj)) {\n    return !obj.length;\n  }\n\n  for (var prop in obj) {\n    return false;\n  }\n\n  return true;\n};\nvar isUndefined = function isUndefined(obj) {\n  return typeof obj === \"undefined\";\n};\nvar merge = function merge(source) {\n  var targets = [];\n\n  for (var _i = 1; _i < arguments.length; _i++) {\n    targets[_i - 1] = arguments[_i];\n  }\n\n  if (!isValidObject(source, false)) {\n    return source;\n  }\n\n  targets.forEach(function (target) {\n    if (source === target) {\n      return;\n    }\n\n    if (isValidObject(target)) {\n      if (Array.isArray(target) && !Array.isArray(source)) {\n        source = [];\n      }\n\n      Object.keys(target).forEach(function (prop) {\n        if (prop === \"__proto__\") {\n          return;\n        }\n\n        var value = target[prop];\n\n        var valType = _typeof(value);\n\n        if (valType === \"object\" && value && (isPlainObject(value) || Array.isArray(value))) {\n          if (_typeof(source[prop]) !== \"object\") {\n            source[prop] = Array.isArray(value) ? [] : {};\n          }\n\n          if (Array.isArray(value) && !value.length) ; else {\n            source[prop] = merge(source[prop], value);\n          }\n        } else {\n          source[prop] = value;\n        }\n      });\n    } else if (Array.isArray(target)) {\n      if (!likeArray(source)) {\n        source = [];\n      }\n    }\n  });\n  return source;\n};\nvar isValidObject = function isValidObject(obj, checkEmpty) {\n  if (checkEmpty === void 0) {\n    checkEmpty = true;\n  }\n\n  return _typeof(obj) === \"object\" && obj && (checkEmpty ? !isEmptyObject(obj) : true);\n};\nvar nextCharCount = function nextCharCount(_char, charIndex, str) {\n  var res = 0;\n\n  if (charIndex + 1 >= str.length) {\n    return res;\n  }\n\n  for (var i = charIndex + 1, len = str.length; i < len; i++) {\n    var currentChar = str[i];\n\n    if (currentChar !== _char) {\n      break;\n    }\n\n    res++;\n  }\n\n  return res;\n};\nvar firstAfterCharsIndex = function firstAfterCharsIndex(afterIndex, chars, str) {\n  var index = str.substr(afterIndex + 1).indexOf(chars);\n\n  if (index === -1) {\n    return index;\n  }\n\n  return afterIndex + index;\n};\nvar reolaceFileSuffix = function reolaceFileSuffix(fileName, suffix) {\n  return fileName.substr(0, fileName.lastIndexOf(\".\")) + suffix;\n};\nvar likeArray = function likeArray(obj) {\n  return Array.isArray(obj) || _typeof(obj) === \"object\" && obj && typeof obj.length === \"number\" && obj.length;\n};\nvar isValidMpPlatform = function isValidMpPlatform(platform) {\n  return platform === \"wechat\"\n  /* wechat */\n  || platform === \"alipay\"\n  /* alipay */\n  || platform === \"smart\"\n  /* smart */\n  || platform === \"tiktok\"\n  /* tiktok */\n  ;\n}; // export const like = (a, b) => {\n//     if (a === b) {\n//         return true;\n//     }\n//     const typeA = typeof a;\n//     const typeB = typeof b;\n//     if (typeA !== typeB) {\n//         return false;\n//     }\n//     if (typeA !== \"object\") {\n//         return false;\n//     }\n//     const arrA = Array.isArray(a);\n//     const arrB = Array.isArray(b);\n//     if (arrA !== arrB) {\n//         return false;\n//     }\n//     // 数组的情况\n//     if (arrA) {\n//         if (a.length !== b.length) {\n//             return false;\n//         }\n//         return (a as any[]).every((item, index) => like(item, b[index]));\n//     }\n//     // 对象的情况\n//     const keysA = Object.keys(a);\n//     const keysB = Object.keys(b);\n//     if (!like(keysA, keysB)) {\n//         return false;\n//     }\n//     return keysA.every((key) => like(a[key], b[key]));\n// };\n\nexports.clone = clone;\nexports.firstAfterCharsIndex = firstAfterCharsIndex;\nexports.getApiVar = getApiVar;\nexports.getMpComponentPageNativeViewId = getMpComponentPageNativeViewId;\nexports.getMpInitLifeName = getMpInitLifeName;\nexports.getMpMountLifeName = getMpMountLifeName;\nexports.getMpNativeViewId = getMpNativeViewId;\nexports.getMpPlatform = getMpPlatform;\nexports.getMpViewPathName = getMpViewPathName;\nexports.getMpViewType = getMpViewType;\nexports.initView = initView;\nexports.isEmptyObject = isEmptyObject;\nexports.isFunc = isFunc;\nexports.isMpIvew = isMpIvew;\nexports.isNativeFunc = isNativeFunc;\nexports.isPlainObject = isPlainObject;\nexports.isPromise = isPromise;\nexports.isUndefined = isUndefined;\nexports.isValidMpPlatform = isValidMpPlatform;\nexports.isValidObject = isValidObject;\nexports.likeArray = likeArray;\nexports.merge = merge;\nexports.nextCharCount = nextCharCount;\nexports.reolaceFileSuffix = reolaceFileSuffix;\nexports.uuid = uuid;\n//# sourceMappingURL=index.cjs.js.map\n"]}