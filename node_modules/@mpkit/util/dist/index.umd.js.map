{"version":3,"file":"index.umd.js","sources":["../index.ts"],"sourcesContent":["import {\n    MpPlatform,\n    MpViewInitLifes,\n    MpViewMountLifes,\n    MkMaybe,\n    MpViewType,\n    MpView,\n    MpTiktokView,\n    MpAlipayViewComponent,\n    MpAlipayViewPage,\n    MpWechatView,\n    MpSmartViewPage,\n    MpSmartViewComponent,\n} from \"@mpkit/types\";\nexport const uuid = () => {\n    return \"xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx\".replace(/[xy]/g, function (c) {\n        // tslint:disable-next-line:no-bitwise\n        var r = (Math.random() * 16) | 0;\n        // tslint:disable-next-line:no-bitwise\n        var v = c === \"x\" ? r : (r & 0x3) | 0x8;\n        return v.toString(16);\n    });\n};\n\nexport const isNativeFunc = (func: Function) => {\n    return (\n        func === Function ||\n        (typeof func === \"function\" &&\n            func.toString().indexOf(\"[native code]\") !== -1)\n    );\n};\n\nexport const isFunc = (obj) => typeof obj === \"function\";\n\nexport const isPromise = (obj) => obj && obj.then;\nexport const getMpPlatform = (() => {\n    let platform;\n    return (): MpPlatform => {\n        if (platform) {\n            return platform as MpPlatform;\n        }\n        if (typeof wx === \"object\") {\n            return (platform = MpPlatform.wechat);\n        }\n        if (typeof my === \"object\") {\n            return (platform = MpPlatform.alipay);\n        }\n        if (typeof swan === \"object\") {\n            return (platform = MpPlatform.smart);\n        }\n        if (typeof tt === \"object\") {\n            return (platform = MpPlatform.tiktok);\n        }\n        return (platform = MpPlatform.unknown);\n    };\n})();\n\nexport const getApiVar = () => {\n    const platform = getMpPlatform();\n    if (platform === MpPlatform.wechat && typeof wx === \"object\") {\n        return wx;\n    } else if (platform === MpPlatform.alipay && typeof my === \"object\") {\n        return my;\n    } else if (platform === MpPlatform.smart && typeof swan === \"object\") {\n        return swan;\n    } else if (platform === MpPlatform.tiktok && typeof tt === \"object\") {\n        return tt;\n    }\n};\n\nexport const getMpInitLifeName = (viewType: MpViewType): MpViewInitLifes => {\n    if (viewType === MpViewType.App) {\n        return \"onLaunch\";\n    }\n    if (viewType === MpViewType.Page) {\n        return \"onLoad\";\n    }\n    if (viewType === MpViewType.Component) {\n        const mpPlatform = getMpPlatform();\n        return mpPlatform !== MpPlatform.alipay ? \"created\" : \"onInit\";\n    }\n};\nexport const getMpMountLifeName = (viewType: MpViewType): MpViewMountLifes => {\n    if (viewType === MpViewType.App) {\n        return \"onShow\";\n    }\n    if (viewType === MpViewType.Page) {\n        return \"onShow\";\n    }\n    if (viewType === MpViewType.Component) {\n        const mpPlatform = getMpPlatform();\n        return mpPlatform !== MpPlatform.alipay ? \"attached\" : \"didMount\";\n    }\n};\n\nexport const initView = (view: MpView, viewType: MpViewType) => {\n    defineViewType(view, viewType);\n    defineViewKey(view);\n};\n\nconst defineViewKey = (view: MpView) => {\n    if (!view.$mkKeyIsDefine) {\n        view.$mkKeyIsDefine = uuid();\n        Object.defineProperty(view, \"$mkKey\", {\n            get() {\n                return getMpNativeViewId(this, getMpViewType(this));\n            },\n        });\n    }\n};\nconst defineViewType = (view: MpView, value: MpViewType) => {\n    if (!view.$mkType) {\n        Object.defineProperty(view, \"$mkType\", {\n            value,\n        });\n    }\n    return value;\n};\n\nexport const getMpViewType = (view: MpView): MkMaybe<MpViewType> => {\n    if (getMpPlatform() === MpPlatform.unknown) {\n        return;\n    }\n    if (!view.$mkType) {\n        if (\"route\" in view || \"__route__\" in view) {\n            return defineViewType(view, MpViewType.Page);\n        }\n        if (\"triggerEvent\" in view) {\n            return defineViewType(view, MpViewType.Component);\n        }\n        if (\"props\" in view && getMpPlatform() === MpPlatform.alipay) {\n            return defineViewType(view, MpViewType.Component);\n        }\n        if (typeof getApp === \"function\" && getApp() === view) {\n            return defineViewType(view, MpViewType.App);\n        }\n        return defineViewType(view, MpViewType.Page);\n    }\n    return view.$mkType;\n};\n\nexport const getMpNativeViewId = (\n    vm: MpView,\n    viewType?: MpViewType\n): MkMaybe<string> => {\n    if (!viewType) {\n        const tsViewType = getMpViewType(vm);\n        if (tsViewType) {\n            viewType = tsViewType;\n        }\n    }\n    if (!viewType) {\n        return;\n    }\n    const MP_PLATFORM = getMpPlatform();\n    if (MP_PLATFORM === MpPlatform.unknown) {\n        return \"unknown\";\n    }\n    if (viewType === MpViewType.App) {\n        return \"app\";\n    }\n    if (viewType === MpViewType.Page) {\n        if (MP_PLATFORM === MpPlatform.wechat) {\n            return (vm as MpWechatView).__wxWebviewId__ + \"\";\n        }\n        if (MP_PLATFORM === MpPlatform.alipay) {\n            return (vm as MpAlipayViewPage).$viewId;\n        }\n        if (MP_PLATFORM === MpPlatform.tiktok) {\n            return (vm as MpTiktokView).__webviewId__ + \"\";\n        }\n        if (MP_PLATFORM === MpPlatform.smart) {\n            defineViewKey(vm);\n            return (vm as MpSmartViewPage).$mkKey;\n        }\n    }\n    if (viewType === MpViewType.Component) {\n        if (MP_PLATFORM === MpPlatform.wechat) {\n            return (vm as MpWechatView).$mkKeyIsDefine;\n        }\n        if (MP_PLATFORM === MpPlatform.alipay) {\n            return (vm as MpAlipayViewComponent).$id + \"\";\n        }\n        if (MP_PLATFORM === MpPlatform.tiktok) {\n            return (vm as MpTiktokView).__nodeId__ + \"\";\n        }\n        if (MP_PLATFORM === MpPlatform.smart) {\n            return (vm as MpSmartViewComponent).nodeId;\n        }\n    }\n};\nexport const getMpComponentPageNativeViewId = (vm: MpView): MkMaybe<string> => {\n    const MP_PLATFORM = getMpPlatform();\n    if (MP_PLATFORM === MpPlatform.wechat) {\n        return (vm as MpWechatView).__wxWebviewId__ + \"\";\n    }\n    if (MP_PLATFORM === MpPlatform.alipay) {\n        return getMpNativeViewId((vm as MpAlipayViewComponent).$page);\n    }\n    if (MP_PLATFORM === MpPlatform.tiktok) {\n        return (vm as MpTiktokView).__webviewId__ + \"\";\n    }\n    if (MP_PLATFORM === MpPlatform.smart) {\n        return getMpNativeViewId((vm as MpSmartViewComponent).pageinstance);\n    }\n};\nexport const getMpViewPathName = (\n    viewType: MpViewType,\n    vm?: MpView\n): string => {\n    if (viewType === MpViewType.App) {\n        return \"app\";\n    }\n    if (!vm) {\n        return \"\";\n    }\n    const MP_PLATFORM = getMpPlatform();\n    if (MP_PLATFORM === MpPlatform.wechat) {\n        return (vm as MpWechatView).is;\n    }\n    if (MP_PLATFORM === MpPlatform.alipay) {\n        if (viewType === MpViewType.Page) {\n            return (vm as MpAlipayViewPage).route;\n        }\n        return (vm as MpAlipayViewComponent).is;\n    }\n    if (MP_PLATFORM === MpPlatform.tiktok) {\n        return (vm as MpTiktokView).is;\n    }\n    if (MP_PLATFORM === MpPlatform.smart) {\n        if (viewType === MpViewType.Page) {\n            return (vm as MpSmartViewPage).route;\n        }\n        return (vm as MpSmartViewComponent).is;\n    }\n};\n\nexport const isMpIvew = (view: any): boolean => {\n    if (typeof view === \"object\" && view && !isPlainObject(view)) {\n        if (view.$mkType) {\n            return true;\n        }\n        if (getMpViewType(view)) {\n            return true;\n        }\n    }\n    return false;\n};\n\nexport const clone = (obj) => {\n    const type = typeof obj;\n    if (type !== \"object\") {\n        return obj;\n    } else if (Array.isArray(obj)) {\n        const res = [];\n        obj.forEach((item, index) => {\n            res[index] = clone(item);\n        });\n        return res;\n    } else if (obj && isPlainObject(obj)) {\n        return Object.keys(obj).reduce((sum, key) => {\n            sum[key] = clone(obj[key]);\n            return sum;\n        }, {});\n    } else {\n        return obj;\n    }\n};\nexport function isPlainObject(value) {\n    if (typeof value !== \"object\") {\n        return false;\n    }\n    if (value == null || Object.getPrototypeOf(value) === null) {\n        return true;\n    }\n    let proto = value;\n    while (Object.getPrototypeOf(proto) !== null) {\n        proto = Object.getPrototypeOf(proto);\n    }\n    return Object.getPrototypeOf(value) === proto;\n}\nexport const isEmptyObject = (obj) => {\n    if (Array.isArray(obj)) {\n        return !obj.length;\n    }\n    for (let prop in obj) {\n        return false;\n    }\n    return true;\n};\n\nexport const isUndefined = (obj) => typeof obj === \"undefined\";\n\nexport const merge = (source, ...targets) => {\n    if (!isValidObject(source, false)) {\n        return source;\n    }\n    targets.forEach((target) => {\n        if (source === target) {\n            return;\n        }\n        if (isValidObject(target)) {\n            if (Array.isArray(target) && !Array.isArray(source)) {\n                source = [];\n            }\n            Object.keys(target).forEach((prop) => {\n                if (prop === \"__proto__\") {\n                    return;\n                }\n                const value = target[prop];\n                const valType = typeof value;\n                if (\n                    valType === \"object\" &&\n                    value &&\n                    (isPlainObject(value) || Array.isArray(value))\n                ) {\n                    if (typeof source[prop] !== \"object\") {\n                        source[prop] = Array.isArray(value) ? [] : {};\n                    }\n                    if (Array.isArray(value) && !value.length) {\n                    } else {\n                        source[prop] = merge(source[prop], value);\n                    }\n                } else {\n                    source[prop] = value;\n                }\n            });\n        } else if (Array.isArray(target)) {\n            if (!likeArray(source)) {\n                source = [];\n            }\n        }\n    });\n    return source;\n};\nexport const isValidObject = (obj, checkEmpty = true) =>\n    typeof obj === \"object\" && obj && (checkEmpty ? !isEmptyObject(obj) : true);\n\nexport const nextCharCount = (\n    char: string,\n    charIndex: number,\n    str: string\n): number => {\n    let res = 0;\n    if (charIndex + 1 >= str.length) {\n        return res;\n    }\n    for (let i = charIndex + 1, len = str.length; i < len; i++) {\n        const currentChar = str[i];\n        if (currentChar !== char) {\n            break;\n        }\n        res++;\n    }\n    return res;\n};\n\nexport const firstAfterCharsIndex = (\n    afterIndex: number,\n    chars: string,\n    str: string\n): number => {\n    const index = str.substr(afterIndex + 1).indexOf(chars);\n    if (index === -1) {\n        return index;\n    }\n    return afterIndex + index;\n};\n\nexport const reolaceFileSuffix = (fileName: string, suffix: string) => {\n    return fileName.substr(0, fileName.lastIndexOf(\".\")) + suffix;\n};\n\nexport const likeArray = (obj) =>\n    Array.isArray(obj) ||\n    (typeof obj === \"object\" &&\n        obj &&\n        typeof obj.length === \"number\" &&\n        obj.length);\n\nexport const isValidMpPlatform = (platform) => {\n    return (\n        platform === MpPlatform.wechat ||\n        platform === MpPlatform.alipay ||\n        platform === MpPlatform.smart ||\n        platform === MpPlatform.tiktok\n    );\n};\n\n// export const like = (a, b) => {\n//     if (a === b) {\n//         return true;\n//     }\n//     const typeA = typeof a;\n//     const typeB = typeof b;\n//     if (typeA !== typeB) {\n//         return false;\n//     }\n//     if (typeA !== \"object\") {\n//         return false;\n//     }\n//     const arrA = Array.isArray(a);\n//     const arrB = Array.isArray(b);\n//     if (arrA !== arrB) {\n//         return false;\n//     }\n//     // 数组的情况\n//     if (arrA) {\n//         if (a.length !== b.length) {\n//             return false;\n//         }\n//         return (a as any[]).every((item, index) => like(item, b[index]));\n//     }\n\n//     // 对象的情况\n//     const keysA = Object.keys(a);\n//     const keysB = Object.keys(b);\n//     if (!like(keysA, keysB)) {\n//         return false;\n//     }\n//     return keysA.every((key) => like(a[key], b[key]));\n// };\n"],"names":["uuid","replace","c","r","Math","random","v","toString","isNativeFunc","func","Function","indexOf","isFunc","obj","isPromise","then","getMpPlatform","platform","wx","my","swan","tt","getApiVar","getMpInitLifeName","viewType","mpPlatform","getMpMountLifeName","initView","view","defineViewType","defineViewKey","$mkKeyIsDefine","Object","defineProperty","get","getMpNativeViewId","getMpViewType","value","$mkType","getApp","vm","tsViewType","MP_PLATFORM","__wxWebviewId__","$viewId","__webviewId__","$mkKey","$id","__nodeId__","nodeId","getMpComponentPageNativeViewId","$page","pageinstance","getMpViewPathName","is","route","isMpIvew","isPlainObject","clone","type","Array","isArray","res_1","forEach","item","index","keys","reduce","sum","key","getPrototypeOf","proto","isEmptyObject","length","prop","isUndefined","merge","source","_i","targets","isValidObject","target","valType","likeArray","checkEmpty","nextCharCount","char","charIndex","str","res","i","len","currentChar","firstAfterCharsIndex","afterIndex","chars","substr","reolaceFileSuffix","fileName","suffix","lastIndexOf","isValidMpPlatform"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;MAcaA,IAAI,GAAG,SAAPA,IAAO;EAChB,SAAO,mCAAmCC,OAAnC,CAA2C,OAA3C,EAAoD,UAAUC,CAAV;EACvD;EACA,QAAIC,CAAC,GAAIC,IAAI,CAACC,MAAL,KAAgB,EAAjB,GAAuB,CAA/B;;EAEA,QAAIC,CAAC,GAAGJ,CAAC,KAAK,GAAN,GAAYC,CAAZ,GAAiBA,CAAC,GAAG,GAAL,GAAY,GAApC;EACA,WAAOG,CAAC,CAACC,QAAF,CAAW,EAAX,CAAP;EACH,GANM,CAAP;EAOH;MAEYC,YAAY,GAAG,SAAfA,YAAe,CAACC,IAAD;EACxB,SACIA,IAAI,KAAKC,QAAT,IACC,OAAOD,IAAP,KAAgB,UAAhB,IACGA,IAAI,CAACF,QAAL,GAAgBI,OAAhB,CAAwB,eAAxB,MAA6C,CAAC,CAHtD;EAKH;MAEYC,MAAM,GAAG,SAATA,MAAS,CAACC,GAAD;EAAS,SAAA,OAAOA,GAAP,KAAe,UAAf;EAAyB;MAE3CC,SAAS,GAAG,SAAZA,SAAY,CAACD,GAAD;EAAS,SAAAA,GAAG,IAAIA,GAAG,CAACE,IAAX;EAAe;MACpCC,aAAa,GAAI;EAC1B,MAAIC,QAAJ;EACA,SAAO;EACH,QAAIA,QAAJ,EAAc;EACV,aAAOA,QAAP;EACH;;EACD,QAAI,QAAOC,EAAP,yCAAOA,EAAP,OAAc,QAAlB,EAA4B;EACxB,aAAQD,QAAQ;;EAAhB;EACH;;EACD,QAAI,QAAOE,EAAP,yCAAOA,EAAP,OAAc,QAAlB,EAA4B;EACxB,aAAQF,QAAQ;;EAAhB;EACH;;EACD,QAAI,QAAOG,IAAP,yCAAOA,IAAP,OAAgB,QAApB,EAA8B;EAC1B,aAAQH,QAAQ;;EAAhB;EACH;;EACD,QAAI,QAAOI,EAAP,yCAAOA,EAAP,OAAc,QAAlB,EAA4B;EACxB,aAAQJ,QAAQ;;EAAhB;EACH;;EACD,WAAQA,QAAQ;;EAAhB;EACH,GAjBD;EAkBH,CApB4B;MAsBhBK,SAAS,GAAG,SAAZA,SAAY;EACrB,MAAML,QAAQ,GAAGD,aAAa,EAA9B;;EACA,MAAIC,QAAQ;;EAAR,KAAkC,QAAOC,EAAP,yCAAOA,EAAP,OAAc,QAApD,EAA8D;EAC1D,WAAOA,EAAP;EACH,GAFD,MAEO,IAAID,QAAQ;;EAAR,KAAkC,QAAOE,EAAP,yCAAOA,EAAP,OAAc,QAApD,EAA8D;EACjE,WAAOA,EAAP;EACH,GAFM,MAEA,IAAIF,QAAQ;;EAAR,KAAiC,QAAOG,IAAP,yCAAOA,IAAP,OAAgB,QAArD,EAA+D;EAClE,WAAOA,IAAP;EACH,GAFM,MAEA,IAAIH,QAAQ;;EAAR,KAAkC,QAAOI,EAAP,yCAAOA,EAAP,OAAc,QAApD,EAA8D;EACjE,WAAOA,EAAP;EACH;EACJ;MAEYE,iBAAiB,GAAG,SAApBA,iBAAoB,CAACC,QAAD;EAC7B,MAAIA,QAAQ;;EAAZ,IAAiC;EAC7B,aAAO,UAAP;EACH;;EACD,MAAIA,QAAQ;;EAAZ,IAAkC;EAC9B,aAAO,QAAP;EACH;;EACD,MAAIA,QAAQ;;EAAZ,IAAuC;EACnC,UAAMC,UAAU,GAAGT,aAAa,EAAhC;EACA,aAAOS,UAAU;;EAAV,QAAmC,SAAnC,GAA+C,QAAtD;EACH;EACJ;MACYC,kBAAkB,GAAG,SAArBA,kBAAqB,CAACF,QAAD;EAC9B,MAAIA,QAAQ;;EAAZ,IAAiC;EAC7B,aAAO,QAAP;EACH;;EACD,MAAIA,QAAQ;;EAAZ,IAAkC;EAC9B,aAAO,QAAP;EACH;;EACD,MAAIA,QAAQ;;EAAZ,IAAuC;EACnC,UAAMC,UAAU,GAAGT,aAAa,EAAhC;EACA,aAAOS,UAAU;;EAAV,QAAmC,UAAnC,GAAgD,UAAvD;EACH;EACJ;MAEYE,QAAQ,GAAG,SAAXA,QAAW,CAACC,IAAD,EAAeJ,QAAf;EACpBK,EAAAA,cAAc,CAACD,IAAD,EAAOJ,QAAP,CAAd;EACAM,EAAAA,aAAa,CAACF,IAAD,CAAb;EACH;;EAED,IAAME,aAAa,GAAG,SAAhBA,aAAgB,CAACF,IAAD;EAClB,MAAI,CAACA,IAAI,CAACG,cAAV,EAA0B;EACtBH,IAAAA,IAAI,CAACG,cAAL,GAAsB/B,IAAI,EAA1B;EACAgC,IAAAA,MAAM,CAACC,cAAP,CAAsBL,IAAtB,EAA4B,QAA5B,EAAsC;EAClCM,MAAAA,GAAG;EACC,eAAOC,iBAAiB,CAAC,IAAD,EAAOC,aAAa,CAAC,IAAD,CAApB,CAAxB;EACH;EAHiC,KAAtC;EAKH;EACJ,CATD;;EAUA,IAAMP,cAAc,GAAG,SAAjBA,cAAiB,CAACD,IAAD,EAAeS,KAAf;EACnB,MAAI,CAACT,IAAI,CAACU,OAAV,EAAmB;EACfN,IAAAA,MAAM,CAACC,cAAP,CAAsBL,IAAtB,EAA4B,SAA5B,EAAuC;EACnCS,MAAAA,KAAK;EAD8B,KAAvC;EAGH;;EACD,SAAOA,KAAP;EACH,CAPD;;MASaD,aAAa,GAAG,SAAhBA,aAAgB,CAACR,IAAD;EACzB,MAAIZ,aAAa;;EAAjB,IAA4C;EACxC;EACH;;EACD,MAAI,CAACY,IAAI,CAACU,OAAV,EAAmB;EACf,QAAI,WAAWV,IAAX,IAAmB,eAAeA,IAAtC,EAA4C;EACxC,aAAOC,cAAc,CAACD,IAAD;;EAAA,OAArB;EACH;;EACD,QAAI,kBAAkBA,IAAtB,EAA4B;EACxB,aAAOC,cAAc,CAACD,IAAD;;EAAA,OAArB;EACH;;EACD,QAAI,WAAWA,IAAX,IAAmBZ,aAAa;;EAApC,MAA8D;EAC1D,eAAOa,cAAc,CAACD,IAAD;;EAAA,SAArB;EACH;;EACD,QAAI,OAAOW,MAAP,KAAkB,UAAlB,IAAgCA,MAAM,OAAOX,IAAjD,EAAuD;EACnD,aAAOC,cAAc,CAACD,IAAD;;EAAA,OAArB;EACH;;EACD,WAAOC,cAAc,CAACD,IAAD;;EAAA,KAArB;EACH;;EACD,SAAOA,IAAI,CAACU,OAAZ;EACH;MAEYH,iBAAiB,GAAG,SAApBA,iBAAoB,CAC7BK,EAD6B,EAE7BhB,QAF6B;EAI7B,MAAI,CAACA,QAAL,EAAe;EACX,QAAMiB,UAAU,GAAGL,aAAa,CAACI,EAAD,CAAhC;;EACA,QAAIC,UAAJ,EAAgB;EACZjB,MAAAA,QAAQ,GAAGiB,UAAX;EACH;EACJ;;EACD,MAAI,CAACjB,QAAL,EAAe;EACX;EACH;;EACD,MAAMkB,WAAW,GAAG1B,aAAa,EAAjC;;EACA,MAAI0B,WAAW;;EAAf,IAAwC;EACpC,aAAO,SAAP;EACH;;EACD,MAAIlB,QAAQ;;EAAZ,IAAiC;EAC7B,aAAO,KAAP;EACH;;EACD,MAAIA,QAAQ;;EAAZ,IAAkC;EAC9B,UAAIkB,WAAW;;EAAf,QAAuC;EACnC,iBAAQF,EAAmB,CAACG,eAApB,GAAsC,EAA9C;EACH;;EACD,UAAID,WAAW;;EAAf,QAAuC;EACnC,iBAAQF,EAAuB,CAACI,OAAhC;EACH;;EACD,UAAIF,WAAW;;EAAf,QAAuC;EACnC,iBAAQF,EAAmB,CAACK,aAApB,GAAoC,EAA5C;EACH;;EACD,UAAIH,WAAW;;EAAf,QAAsC;EAClCZ,UAAAA,aAAa,CAACU,EAAD,CAAb;EACA,iBAAQA,EAAsB,CAACM,MAA/B;EACH;EACJ;;EACD,MAAItB,QAAQ;;EAAZ,IAAuC;EACnC,UAAIkB,WAAW;;EAAf,QAAuC;EACnC,iBAAQF,EAAmB,CAACT,cAA5B;EACH;;EACD,UAAIW,WAAW;;EAAf,QAAuC;EACnC,iBAAQF,EAA4B,CAACO,GAA7B,GAAmC,EAA3C;EACH;;EACD,UAAIL,WAAW;;EAAf,QAAuC;EACnC,iBAAQF,EAAmB,CAACQ,UAApB,GAAiC,EAAzC;EACH;;EACD,UAAIN,WAAW;;EAAf,QAAsC;EAClC,iBAAQF,EAA2B,CAACS,MAApC;EACH;EACJ;EACJ;MACYC,8BAA8B,GAAG,SAAjCA,8BAAiC,CAACV,EAAD;EAC1C,MAAME,WAAW,GAAG1B,aAAa,EAAjC;;EACA,MAAI0B,WAAW;;EAAf,IAAuC;EACnC,aAAQF,EAAmB,CAACG,eAApB,GAAsC,EAA9C;EACH;;EACD,MAAID,WAAW;;EAAf,IAAuC;EACnC,aAAOP,iBAAiB,CAAEK,EAA4B,CAACW,KAA/B,CAAxB;EACH;;EACD,MAAIT,WAAW;;EAAf,IAAuC;EACnC,aAAQF,EAAmB,CAACK,aAApB,GAAoC,EAA5C;EACH;;EACD,MAAIH,WAAW;;EAAf,IAAsC;EAClC,aAAOP,iBAAiB,CAAEK,EAA2B,CAACY,YAA9B,CAAxB;EACH;EACJ;MACYC,iBAAiB,GAAG,SAApBA,iBAAoB,CAC7B7B,QAD6B,EAE7BgB,EAF6B;EAI7B,MAAIhB,QAAQ;;EAAZ,IAAiC;EAC7B,aAAO,KAAP;EACH;;EACD,MAAI,CAACgB,EAAL,EAAS;EACL,WAAO,EAAP;EACH;;EACD,MAAME,WAAW,GAAG1B,aAAa,EAAjC;;EACA,MAAI0B,WAAW;;EAAf,IAAuC;EACnC,aAAQF,EAAmB,CAACc,EAA5B;EACH;;EACD,MAAIZ,WAAW;;EAAf,IAAuC;EACnC,UAAIlB,QAAQ;;EAAZ,QAAkC;EAC9B,iBAAQgB,EAAuB,CAACe,KAAhC;EACH;;EACD,aAAQf,EAA4B,CAACc,EAArC;EACH;;EACD,MAAIZ,WAAW;;EAAf,IAAuC;EACnC,aAAQF,EAAmB,CAACc,EAA5B;EACH;;EACD,MAAIZ,WAAW;;EAAf,IAAsC;EAClC,UAAIlB,QAAQ;;EAAZ,QAAkC;EAC9B,iBAAQgB,EAAsB,CAACe,KAA/B;EACH;;EACD,aAAQf,EAA2B,CAACc,EAApC;EACH;EACJ;MAEYE,QAAQ,GAAG,SAAXA,QAAW,CAAC5B,IAAD;EACpB,MAAI,QAAOA,IAAP,MAAgB,QAAhB,IAA4BA,IAA5B,IAAoC,CAAC6B,aAAa,CAAC7B,IAAD,CAAtD,EAA8D;EAC1D,QAAIA,IAAI,CAACU,OAAT,EAAkB;EACd,aAAO,IAAP;EACH;;EACD,QAAIF,aAAa,CAACR,IAAD,CAAjB,EAAyB;EACrB,aAAO,IAAP;EACH;EACJ;;EACD,SAAO,KAAP;EACH;MAEY8B,KAAK,GAAG,SAARA,KAAQ,CAAC7C,GAAD;EACjB,MAAM8C,IAAI,WAAU9C,GAAV,CAAV;;EACA,MAAI8C,IAAI,KAAK,QAAb,EAAuB;EACnB,WAAO9C,GAAP;EACH,GAFD,MAEO,IAAI+C,KAAK,CAACC,OAAN,CAAchD,GAAd,CAAJ,EAAwB;EAC3B,QAAMiD,KAAG,GAAG,EAAZ;EACAjD,IAAAA,GAAG,CAACkD,OAAJ,CAAY,UAACC,IAAD,EAAOC,KAAP;EACRH,MAAAA,KAAG,CAACG,KAAD,CAAH,GAAaP,KAAK,CAACM,IAAD,CAAlB;EACH,KAFD;EAGA,WAAOF,KAAP;EACH,GANM,MAMA,IAAIjD,GAAG,IAAI4C,aAAa,CAAC5C,GAAD,CAAxB,EAA+B;EAClC,WAAOmB,MAAM,CAACkC,IAAP,CAAYrD,GAAZ,EAAiBsD,MAAjB,CAAwB,UAACC,GAAD,EAAMC,GAAN;EAC3BD,MAAAA,GAAG,CAACC,GAAD,CAAH,GAAWX,KAAK,CAAC7C,GAAG,CAACwD,GAAD,CAAJ,CAAhB;EACA,aAAOD,GAAP;EACH,KAHM,EAGJ,EAHI,CAAP;EAIH,GALM,MAKA;EACH,WAAOvD,GAAP;EACH;EACJ;WACe4C,cAAcpB;EAC1B,MAAI,QAAOA,KAAP,MAAiB,QAArB,EAA+B;EAC3B,WAAO,KAAP;EACH;;EACD,MAAIA,KAAK,IAAI,IAAT,IAAiBL,MAAM,CAACsC,cAAP,CAAsBjC,KAAtB,MAAiC,IAAtD,EAA4D;EACxD,WAAO,IAAP;EACH;;EACD,MAAIkC,KAAK,GAAGlC,KAAZ;;EACA,SAAOL,MAAM,CAACsC,cAAP,CAAsBC,KAAtB,MAAiC,IAAxC,EAA8C;EAC1CA,IAAAA,KAAK,GAAGvC,MAAM,CAACsC,cAAP,CAAsBC,KAAtB,CAAR;EACH;;EACD,SAAOvC,MAAM,CAACsC,cAAP,CAAsBjC,KAAtB,MAAiCkC,KAAxC;EACH;MACYC,aAAa,GAAG,SAAhBA,aAAgB,CAAC3D,GAAD;EACzB,MAAI+C,KAAK,CAACC,OAAN,CAAchD,GAAd,CAAJ,EAAwB;EACpB,WAAO,CAACA,GAAG,CAAC4D,MAAZ;EACH;;EACD,OAAK,IAAIC,IAAT,IAAiB7D,GAAjB,EAAsB;EAClB,WAAO,KAAP;EACH;;EACD,SAAO,IAAP;EACH;MAEY8D,WAAW,GAAG,SAAdA,WAAc,CAAC9D,GAAD;EAAS,SAAA,OAAOA,GAAP,KAAe,WAAf;EAA0B;MAEjD+D,KAAK,GAAG,SAARA,KAAQ,CAACC,MAAD;EAAS,kBAAA;;SAAA,YAAAC,uBAAAA;EAAAC,IAAAA,eAAA,gBAAA;;;EAC1B,MAAI,CAACC,aAAa,CAACH,MAAD,EAAS,KAAT,CAAlB,EAAmC;EAC/B,WAAOA,MAAP;EACH;;EACDE,EAAAA,OAAO,CAAChB,OAAR,CAAgB,UAACkB,MAAD;EACZ,QAAIJ,MAAM,KAAKI,MAAf,EAAuB;EACnB;EACH;;EACD,QAAID,aAAa,CAACC,MAAD,CAAjB,EAA2B;EACvB,UAAIrB,KAAK,CAACC,OAAN,CAAcoB,MAAd,KAAyB,CAACrB,KAAK,CAACC,OAAN,CAAcgB,MAAd,CAA9B,EAAqD;EACjDA,QAAAA,MAAM,GAAG,EAAT;EACH;;EACD7C,MAAAA,MAAM,CAACkC,IAAP,CAAYe,MAAZ,EAAoBlB,OAApB,CAA4B,UAACW,IAAD;EACxB,YAAIA,IAAI,KAAK,WAAb,EAA0B;EACtB;EACH;;EACD,YAAMrC,KAAK,GAAG4C,MAAM,CAACP,IAAD,CAApB;;EACA,YAAMQ,OAAO,WAAU7C,KAAV,CAAb;;EACA,YACI6C,OAAO,KAAK,QAAZ,IACA7C,KADA,KAECoB,aAAa,CAACpB,KAAD,CAAb,IAAwBuB,KAAK,CAACC,OAAN,CAAcxB,KAAd,CAFzB,CADJ,EAIE;EACE,cAAI,QAAOwC,MAAM,CAACH,IAAD,CAAb,MAAwB,QAA5B,EAAsC;EAClCG,YAAAA,MAAM,CAACH,IAAD,CAAN,GAAed,KAAK,CAACC,OAAN,CAAcxB,KAAd,IAAuB,EAAvB,GAA4B,EAA3C;EACH;;EACD,cAAIuB,KAAK,CAACC,OAAN,CAAcxB,KAAd,KAAwB,CAACA,KAAK,CAACoC,MAAnC,EAA2C,CAA3C,MACO;EACHI,YAAAA,MAAM,CAACH,IAAD,CAAN,GAAeE,KAAK,CAACC,MAAM,CAACH,IAAD,CAAP,EAAerC,KAAf,CAApB;EACH;EACJ,SAZD,MAYO;EACHwC,UAAAA,MAAM,CAACH,IAAD,CAAN,GAAerC,KAAf;EACH;EACJ,OArBD;EAsBH,KA1BD,MA0BO,IAAIuB,KAAK,CAACC,OAAN,CAAcoB,MAAd,CAAJ,EAA2B;EAC9B,UAAI,CAACE,SAAS,CAACN,MAAD,CAAd,EAAwB;EACpBA,QAAAA,MAAM,GAAG,EAAT;EACH;EACJ;EACJ,GAnCD;EAoCA,SAAOA,MAAP;EACH;MACYG,aAAa,GAAG,SAAhBA,aAAgB,CAACnE,GAAD,EAAMuE,UAAN;EAAM,2BAAA,EAAA;EAAAA,IAAAA,iBAAA;;;EAC/B,SAAA,QAAOvE,GAAP,MAAe,QAAf,IAA2BA,GAA3B,KAAmCuE,UAAU,GAAG,CAACZ,aAAa,CAAC3D,GAAD,CAAjB,GAAyB,IAAtE,CAAA;EAA2E;MAElEwE,aAAa,GAAG,SAAhBA,aAAgB,CACzBC,KADyB,EAEzBC,SAFyB,EAGzBC,GAHyB;EAKzB,MAAIC,GAAG,GAAG,CAAV;;EACA,MAAIF,SAAS,GAAG,CAAZ,IAAiBC,GAAG,CAACf,MAAzB,EAAiC;EAC7B,WAAOgB,GAAP;EACH;;EACD,OAAK,IAAIC,CAAC,GAAGH,SAAS,GAAG,CAApB,EAAuBI,GAAG,GAAGH,GAAG,CAACf,MAAtC,EAA8CiB,CAAC,GAAGC,GAAlD,EAAuDD,CAAC,EAAxD,EAA4D;EACxD,QAAME,WAAW,GAAGJ,GAAG,CAACE,CAAD,CAAvB;;EACA,QAAIE,WAAW,KAAKN,KAApB,EAA0B;EACtB;EACH;;EACDG,IAAAA,GAAG;EACN;;EACD,SAAOA,GAAP;EACH;MAEYI,oBAAoB,GAAG,SAAvBA,oBAAuB,CAChCC,UADgC,EAEhCC,KAFgC,EAGhCP,GAHgC;EAKhC,MAAMvB,KAAK,GAAGuB,GAAG,CAACQ,MAAJ,CAAWF,UAAU,GAAG,CAAxB,EAA2BnF,OAA3B,CAAmCoF,KAAnC,CAAd;;EACA,MAAI9B,KAAK,KAAK,CAAC,CAAf,EAAkB;EACd,WAAOA,KAAP;EACH;;EACD,SAAO6B,UAAU,GAAG7B,KAApB;EACH;MAEYgC,iBAAiB,GAAG,SAApBA,iBAAoB,CAACC,QAAD,EAAmBC,MAAnB;EAC7B,SAAOD,QAAQ,CAACF,MAAT,CAAgB,CAAhB,EAAmBE,QAAQ,CAACE,WAAT,CAAqB,GAArB,CAAnB,IAAgDD,MAAvD;EACH;MAEYhB,SAAS,GAAG,SAAZA,SAAY,CAACtE,GAAD;EACrB,SAAA+C,KAAK,CAACC,OAAN,CAAchD,GAAd,KACC,QAAOA,GAAP,MAAe,QAAf,IACGA,GADH,IAEG,OAAOA,GAAG,CAAC4D,MAAX,KAAsB,QAFzB,IAGG5D,GAAG,CAAC4D,MAJR;EAIe;MAEN4B,iBAAiB,GAAG,SAApBA,iBAAoB,CAACpF,QAAD;EAC7B,SACIA,QAAQ;;EAAR,KACAA,QAAQ;;EADR,KAEAA,QAAQ;;EAFR,KAGAA,QAAQ;;EAJZ;EAMH;EAGD;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EAEA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;"}