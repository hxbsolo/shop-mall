{"version":3,"file":"index.esm.js","sources":["../index.ts"],"sourcesContent":["import {\n    MpPlatform,\n    MpViewInitLifes,\n    MpViewMountLifes,\n    MkMaybe,\n    MpViewType,\n    MpView,\n    MpTiktokView,\n    MpAlipayViewComponent,\n    MpAlipayViewPage,\n    MpWechatView,\n    MpSmartViewPage,\n    MpSmartViewComponent,\n} from \"@mpkit/types\";\nexport const uuid = () => {\n    return \"xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx\".replace(/[xy]/g, function (c) {\n        // tslint:disable-next-line:no-bitwise\n        var r = (Math.random() * 16) | 0;\n        // tslint:disable-next-line:no-bitwise\n        var v = c === \"x\" ? r : (r & 0x3) | 0x8;\n        return v.toString(16);\n    });\n};\n\nexport const isNativeFunc = (func: Function) => {\n    return (\n        func === Function ||\n        (typeof func === \"function\" &&\n            func.toString().indexOf(\"[native code]\") !== -1)\n    );\n};\n\nexport const isFunc = (obj) => typeof obj === \"function\";\n\nexport const isPromise = (obj) => obj && obj.then;\nexport const getMpPlatform = (() => {\n    let platform;\n    return (): MpPlatform => {\n        if (platform) {\n            return platform as MpPlatform;\n        }\n        if (typeof wx === \"object\") {\n            return (platform = MpPlatform.wechat);\n        }\n        if (typeof my === \"object\") {\n            return (platform = MpPlatform.alipay);\n        }\n        if (typeof swan === \"object\") {\n            return (platform = MpPlatform.smart);\n        }\n        if (typeof tt === \"object\") {\n            return (platform = MpPlatform.tiktok);\n        }\n        return (platform = MpPlatform.unknown);\n    };\n})();\n\nexport const getApiVar = () => {\n    const platform = getMpPlatform();\n    if (platform === MpPlatform.wechat && typeof wx === \"object\") {\n        return wx;\n    } else if (platform === MpPlatform.alipay && typeof my === \"object\") {\n        return my;\n    } else if (platform === MpPlatform.smart && typeof swan === \"object\") {\n        return swan;\n    } else if (platform === MpPlatform.tiktok && typeof tt === \"object\") {\n        return tt;\n    }\n};\n\nexport const getMpInitLifeName = (viewType: MpViewType): MpViewInitLifes => {\n    if (viewType === MpViewType.App) {\n        return \"onLaunch\";\n    }\n    if (viewType === MpViewType.Page) {\n        return \"onLoad\";\n    }\n    if (viewType === MpViewType.Component) {\n        const mpPlatform = getMpPlatform();\n        return mpPlatform !== MpPlatform.alipay ? \"created\" : \"onInit\";\n    }\n};\nexport const getMpMountLifeName = (viewType: MpViewType): MpViewMountLifes => {\n    if (viewType === MpViewType.App) {\n        return \"onShow\";\n    }\n    if (viewType === MpViewType.Page) {\n        return \"onShow\";\n    }\n    if (viewType === MpViewType.Component) {\n        const mpPlatform = getMpPlatform();\n        return mpPlatform !== MpPlatform.alipay ? \"attached\" : \"didMount\";\n    }\n};\n\nexport const initView = (view: MpView, viewType: MpViewType) => {\n    defineViewType(view, viewType);\n    defineViewKey(view);\n};\n\nconst defineViewKey = (view: MpView) => {\n    if (!view.$mkKeyIsDefine) {\n        view.$mkKeyIsDefine = uuid();\n        Object.defineProperty(view, \"$mkKey\", {\n            get() {\n                return getMpNativeViewId(this, getMpViewType(this));\n            },\n        });\n    }\n};\nconst defineViewType = (view: MpView, value: MpViewType) => {\n    if (!view.$mkType) {\n        Object.defineProperty(view, \"$mkType\", {\n            value,\n        });\n    }\n    return value;\n};\n\nexport const getMpViewType = (view: MpView): MkMaybe<MpViewType> => {\n    if (getMpPlatform() === MpPlatform.unknown) {\n        return;\n    }\n    if (!view.$mkType) {\n        if (\"route\" in view || \"__route__\" in view) {\n            return defineViewType(view, MpViewType.Page);\n        }\n        if (\"triggerEvent\" in view) {\n            return defineViewType(view, MpViewType.Component);\n        }\n        if (\"props\" in view && getMpPlatform() === MpPlatform.alipay) {\n            return defineViewType(view, MpViewType.Component);\n        }\n        if (typeof getApp === \"function\" && getApp() === view) {\n            return defineViewType(view, MpViewType.App);\n        }\n        return defineViewType(view, MpViewType.Page);\n    }\n    return view.$mkType;\n};\n\nexport const getMpNativeViewId = (\n    vm: MpView,\n    viewType?: MpViewType\n): MkMaybe<string> => {\n    if (!viewType) {\n        const tsViewType = getMpViewType(vm);\n        if (tsViewType) {\n            viewType = tsViewType;\n        }\n    }\n    if (!viewType) {\n        return;\n    }\n    const MP_PLATFORM = getMpPlatform();\n    if (MP_PLATFORM === MpPlatform.unknown) {\n        return \"unknown\";\n    }\n    if (viewType === MpViewType.App) {\n        return \"app\";\n    }\n    if (viewType === MpViewType.Page) {\n        if (MP_PLATFORM === MpPlatform.wechat) {\n            return (vm as MpWechatView).__wxWebviewId__ + \"\";\n        }\n        if (MP_PLATFORM === MpPlatform.alipay) {\n            return (vm as MpAlipayViewPage).$viewId;\n        }\n        if (MP_PLATFORM === MpPlatform.tiktok) {\n            return (vm as MpTiktokView).__webviewId__ + \"\";\n        }\n        if (MP_PLATFORM === MpPlatform.smart) {\n            defineViewKey(vm);\n            return (vm as MpSmartViewPage).$mkKey;\n        }\n    }\n    if (viewType === MpViewType.Component) {\n        if (MP_PLATFORM === MpPlatform.wechat) {\n            return (vm as MpWechatView).$mkKeyIsDefine;\n        }\n        if (MP_PLATFORM === MpPlatform.alipay) {\n            return (vm as MpAlipayViewComponent).$id + \"\";\n        }\n        if (MP_PLATFORM === MpPlatform.tiktok) {\n            return (vm as MpTiktokView).__nodeId__ + \"\";\n        }\n        if (MP_PLATFORM === MpPlatform.smart) {\n            return (vm as MpSmartViewComponent).nodeId;\n        }\n    }\n};\nexport const getMpComponentPageNativeViewId = (vm: MpView): MkMaybe<string> => {\n    const MP_PLATFORM = getMpPlatform();\n    if (MP_PLATFORM === MpPlatform.wechat) {\n        return (vm as MpWechatView).__wxWebviewId__ + \"\";\n    }\n    if (MP_PLATFORM === MpPlatform.alipay) {\n        return getMpNativeViewId((vm as MpAlipayViewComponent).$page);\n    }\n    if (MP_PLATFORM === MpPlatform.tiktok) {\n        return (vm as MpTiktokView).__webviewId__ + \"\";\n    }\n    if (MP_PLATFORM === MpPlatform.smart) {\n        return getMpNativeViewId((vm as MpSmartViewComponent).pageinstance);\n    }\n};\nexport const getMpViewPathName = (\n    viewType: MpViewType,\n    vm?: MpView\n): string => {\n    if (viewType === MpViewType.App) {\n        return \"app\";\n    }\n    if (!vm) {\n        return \"\";\n    }\n    const MP_PLATFORM = getMpPlatform();\n    if (MP_PLATFORM === MpPlatform.wechat) {\n        return (vm as MpWechatView).is;\n    }\n    if (MP_PLATFORM === MpPlatform.alipay) {\n        if (viewType === MpViewType.Page) {\n            return (vm as MpAlipayViewPage).route;\n        }\n        return (vm as MpAlipayViewComponent).is;\n    }\n    if (MP_PLATFORM === MpPlatform.tiktok) {\n        return (vm as MpTiktokView).is;\n    }\n    if (MP_PLATFORM === MpPlatform.smart) {\n        if (viewType === MpViewType.Page) {\n            return (vm as MpSmartViewPage).route;\n        }\n        return (vm as MpSmartViewComponent).is;\n    }\n};\n\nexport const isMpIvew = (view: any): boolean => {\n    if (typeof view === \"object\" && view && !isPlainObject(view)) {\n        if (view.$mkType) {\n            return true;\n        }\n        if (getMpViewType(view)) {\n            return true;\n        }\n    }\n    return false;\n};\n\nexport const clone = (obj) => {\n    const type = typeof obj;\n    if (type !== \"object\") {\n        return obj;\n    } else if (Array.isArray(obj)) {\n        const res = [];\n        obj.forEach((item, index) => {\n            res[index] = clone(item);\n        });\n        return res;\n    } else if (obj && isPlainObject(obj)) {\n        return Object.keys(obj).reduce((sum, key) => {\n            sum[key] = clone(obj[key]);\n            return sum;\n        }, {});\n    } else {\n        return obj;\n    }\n};\nexport function isPlainObject(value) {\n    if (typeof value !== \"object\") {\n        return false;\n    }\n    if (value == null || Object.getPrototypeOf(value) === null) {\n        return true;\n    }\n    let proto = value;\n    while (Object.getPrototypeOf(proto) !== null) {\n        proto = Object.getPrototypeOf(proto);\n    }\n    return Object.getPrototypeOf(value) === proto;\n}\nexport const isEmptyObject = (obj) => {\n    if (Array.isArray(obj)) {\n        return !obj.length;\n    }\n    for (let prop in obj) {\n        return false;\n    }\n    return true;\n};\n\nexport const isUndefined = (obj) => typeof obj === \"undefined\";\n\nexport const merge = (source, ...targets) => {\n    if (!isValidObject(source, false)) {\n        return source;\n    }\n    targets.forEach((target) => {\n        if (source === target) {\n            return;\n        }\n        if (isValidObject(target)) {\n            if (Array.isArray(target) && !Array.isArray(source)) {\n                source = [];\n            }\n            Object.keys(target).forEach((prop) => {\n                if (prop === \"__proto__\") {\n                    return;\n                }\n                const value = target[prop];\n                const valType = typeof value;\n                if (\n                    valType === \"object\" &&\n                    value &&\n                    (isPlainObject(value) || Array.isArray(value))\n                ) {\n                    if (typeof source[prop] !== \"object\") {\n                        source[prop] = Array.isArray(value) ? [] : {};\n                    }\n                    if (Array.isArray(value) && !value.length) {\n                    } else {\n                        source[prop] = merge(source[prop], value);\n                    }\n                } else {\n                    source[prop] = value;\n                }\n            });\n        } else if (Array.isArray(target)) {\n            if (!likeArray(source)) {\n                source = [];\n            }\n        }\n    });\n    return source;\n};\nexport const isValidObject = (obj, checkEmpty = true) =>\n    typeof obj === \"object\" && obj && (checkEmpty ? !isEmptyObject(obj) : true);\n\nexport const nextCharCount = (\n    char: string,\n    charIndex: number,\n    str: string\n): number => {\n    let res = 0;\n    if (charIndex + 1 >= str.length) {\n        return res;\n    }\n    for (let i = charIndex + 1, len = str.length; i < len; i++) {\n        const currentChar = str[i];\n        if (currentChar !== char) {\n            break;\n        }\n        res++;\n    }\n    return res;\n};\n\nexport const firstAfterCharsIndex = (\n    afterIndex: number,\n    chars: string,\n    str: string\n): number => {\n    const index = str.substr(afterIndex + 1).indexOf(chars);\n    if (index === -1) {\n        return index;\n    }\n    return afterIndex + index;\n};\n\nexport const reolaceFileSuffix = (fileName: string, suffix: string) => {\n    return fileName.substr(0, fileName.lastIndexOf(\".\")) + suffix;\n};\n\nexport const likeArray = (obj) =>\n    Array.isArray(obj) ||\n    (typeof obj === \"object\" &&\n        obj &&\n        typeof obj.length === \"number\" &&\n        obj.length);\n\nexport const isValidMpPlatform = (platform) => {\n    return (\n        platform === MpPlatform.wechat ||\n        platform === MpPlatform.alipay ||\n        platform === MpPlatform.smart ||\n        platform === MpPlatform.tiktok\n    );\n};\n\n// export const like = (a, b) => {\n//     if (a === b) {\n//         return true;\n//     }\n//     const typeA = typeof a;\n//     const typeB = typeof b;\n//     if (typeA !== typeB) {\n//         return false;\n//     }\n//     if (typeA !== \"object\") {\n//         return false;\n//     }\n//     const arrA = Array.isArray(a);\n//     const arrB = Array.isArray(b);\n//     if (arrA !== arrB) {\n//         return false;\n//     }\n//     // 数组的情况\n//     if (arrA) {\n//         if (a.length !== b.length) {\n//             return false;\n//         }\n//         return (a as any[]).every((item, index) => like(item, b[index]));\n//     }\n\n//     // 对象的情况\n//     const keysA = Object.keys(a);\n//     const keysB = Object.keys(b);\n//     if (!like(keysA, keysB)) {\n//         return false;\n//     }\n//     return keysA.every((key) => like(a[key], b[key]));\n// };\n"],"names":["uuid","replace","c","r","Math","random","v","toString","isNativeFunc","func","Function","indexOf","isFunc","obj","isPromise","then","getMpPlatform","platform","wx","my","swan","tt","getApiVar","getMpInitLifeName","viewType","mpPlatform","getMpMountLifeName","initView","view","defineViewType","defineViewKey","$mkKeyIsDefine","Object","defineProperty","get","getMpNativeViewId","getMpViewType","value","$mkType","getApp","vm","tsViewType","MP_PLATFORM","__wxWebviewId__","$viewId","__webviewId__","$mkKey","$id","__nodeId__","nodeId","getMpComponentPageNativeViewId","$page","pageinstance","getMpViewPathName","is","route","isMpIvew","isPlainObject","clone","type","Array","isArray","res_1","forEach","item","index","keys","reduce","sum","key","getPrototypeOf","proto","isEmptyObject","length","prop","isUndefined","merge","source","_i","targets","isValidObject","target","valType","likeArray","checkEmpty","nextCharCount","char","charIndex","str","res","i","len","currentChar","firstAfterCharsIndex","afterIndex","chars","substr","reolaceFileSuffix","fileName","suffix","lastIndexOf","isValidMpPlatform"],"mappings":"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"}