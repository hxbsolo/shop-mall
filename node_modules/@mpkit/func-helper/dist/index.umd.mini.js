!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).MpKitFuncHelper={})}(this,function(e){"use strict";function y(e){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var o,t=(o=["before","after","catch","complete","done"],function(f,a,i,p){function h(t){return a?(t in r||(i.forEach(function(t){t&&o.forEach(function(e){n(t[e])&&(r[e]=1)})}),o.forEach(function(e){e in r||(r[e]=0)})),r[t]):i.some(function(e){return e&&n(e[t])})}var d={before:1,after:1,catch:1,complete:1,done:1},r={};return{func:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var s={ctx:this,func:f,args:e,state:{},stepResultList:[],doneCallback:function(e,t){s.done||(e?(l("RejectReason",e),s.fulfilled=!1):(s.value=t,s.fulfilled=!0),r("complete"),n("callback"))}};p&&Object.assign(s.state,p);var r=function(t){if(("done"===t||"catch"===t||!s.stop)&&(!!d[t]&&(!a||h(t))))try{for(var e=0,r=i.length;e<r;e++){var o=i[e];if(o&&o[t])if(Array.isArray(o[t]))for(var n=o[t],c=0,u=n.length;c<u&&(s.stepResultList.push({step:t,result:n[c]?n[c](s):void 0}),"done"===t||"catch"===t||!s.stop);c++);else s.stepResultList.push({step:t,result:o[t](s)});if("done"!==t&&"catch"!==t&&s.stop)break}}catch(e){var f=""+t[0].toUpperCase()+t.substr(1)+"Exception";"catch"!==t?l(f,e):s.errors.push({type:f,error:e})}},l=function(e,t){if(s.errors||(s.errors=[]),s.errors.push({type:e,error:t}),h("catch"))try{r("catch")}catch(e){s.errors.push({type:"CatchException",error:e})}},o={},n=function(e){o[e]=1;var t="object"===y(s.result)&&s.result&&(s.result.then||s.result.catch);(!s.needDoneCallback||!t||o.promise&&o.callback)&&(s.done=!0,r("done"))};if(r("before"),s.stop)return r("done"),s.result;try{var c=f.apply(this,e);s.result=c,r("after");var u="object"===y(s.result)&&s.result&&(s.result.then||s.result.catch);return s.needDoneCallback||u?(u&&s.result.then&&s.result.then(function(e){s.value=e,s.fulfilled=!0,r("complete"),n("promise")}),u&&s.result.catch&&s.result.catch(function(e){s.fulfilled=!1,l("RejectReason",e),r("complete"),n("promise")})):r("done"),s.result}catch(e){throw l("MethodException",e),r("done"),e}},disable:function(e){e?d[e]=0:o.forEach(function(e){d[e]=0})},enable:function(e){e?d[e]=1:o.forEach(function(e){d[e]=1})}}});function n(e){return"function"==typeof e||Array.isArray(e)&&e.some(function(e){return"function"==typeof e})}e.hookFunc=t,e.replaceFunc=function(r,o,e,t){var n=!0;return e&&e({data:t,original:r,replace:function(){n=!0},restore:function(){n=!1}}),function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return n?o.apply(this,e):r.apply(this,e)}},Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=index.umd.mini.js.map
